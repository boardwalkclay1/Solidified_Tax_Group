<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Upload Documents â€“ Solidified Tax Group</title>
  <link rel="stylesheet" href="styles/style.css" />
</head>

<body>

<header class="topbar">
  <div class="st-logo">
    <span class="st-s">S</span>
    <span class="st-t">T</span>
    <span class="st-dot-left"></span>
    <span class="st-dot-top"></span>
  </div>
</header>

<main class="dashboard-layout">

  <aside class="sidebar">
    <h3 class="sidebar-title">Client Menu</h3>
    <a href="client-dashboard.html">ğŸ  Dashboard</a>
    <a href="client-documents.html">ğŸ“„ Documents</a>
    <a href="client-upload.html">â¬†ï¸ Upload</a>
    <a href="client-sign.html">âœï¸ Sign Docs</a>
    <a href="client-status.html">ğŸ“Š Tax Status</a>
  </aside>

  <section class="dashboard-main">

    <h2>Upload Documents</h2>
    <p>Upload IDs, Wâ€‘2s, 1099s, proof of residency, and more.</p>

    <form id="uploadForm" enctype="multipart/form-data">
      <input type="file" name="files" multiple required>
      <button class="btn" type="submit">Upload</button>
      <p id="uploadMsg"></p>
    </form>

  </section>

</main>

<script>
document.getElementById("uploadForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const msg = document.getElementById("uploadMsg");

  const email = localStorage.getItem("clientEmail");
  const formData = new FormData(e.target);
  formData.append("clientEmail", email);

  const res = await fetch("/api/client/upload", {
    method: "POST",
    body: formData
  });

  const data = await res.json();

  if (!data.success) {
    msg.textContent = "Upload failed.";
    msg.style.color = "red";
    return;
  }

  msg.textContent = "Upload successful.";
  msg.style.color = "green";

  setTimeout(() => window.location.href = "client-documents.html", 800);
});
</script>

</body>
</html>
